{% extends "base.html" %}

{% block body%}
{% load static %}

<div id="infoboard">
<h2>CPC {{ ultimo.nome_curso }} UFSM</h2><br/>
    <div class="info1">
        <img class="left" src="{% static "img/icon_avaliacao.png" %}" />
        <b>Ano da Última Avaliação:</b>   <p>{{ ultimo.ano }}</p>
        <b>Índice da Última Avaliação:</b> <p>{{ ultimo.cpc_f2013 }}</p>
    </div>
    <div class="info2">
        <img class="left" src="{% static "img/icon_posicao.png" %}" />
        <b>Posicionamento no Estado:</b> <p> {{ ultimo.posicaorscpc }} </p>
        <b>Posicionamento no País:</b> <p>{{ ultimo.posicaobrasilcpc }}</p>
    </div>
</div>
<br/><br/><br/>
<script type="text/javascript">
$(function () {
    $('#container').highcharts({
        chart: {
            zoomType: 'xy'
        },
        title: {
            text: 'Evolução do CPC por Triênio da Avaliação (ENADE) de {{ curso.0.nome_curso }} e suas posições no Estado (RS), Região Sul e Brasil'
        },
        subtitle: {
            text: 'UFSM, RS, Sul, Brasil'
        },
        xAxis: [{
            categories: [{% for c in curso %} {{ c.ano }}, {% endfor %}],
            crosshair: true
        }],
        yAxis: [ { // 2 yAxis
            gridLineWidth: 0,
            max: 5,
            tickInterval: 1,
            title: {
                text: 'CPC UFSM',
            },
            labels: {
                format: '{value}',
            }
        }, { // 3 yAxis
            title: {
                text: 'RS',
            },
            gridLineWidth: 0,
            opposite: true,
            min: 0,
        },
        { // 4 yAxis
            title: {
                text: 'Sul',
            },
            gridLineWidth: 1,
            opposite: true,
            min: 0,
        },
        { // 5 yAxis
            title: {
                text: 'Brasil',
            },
            gridLineWidth: 1,
            opposite: true,
            min: 0,
        },
        { // 6 yAxis
            title: {
                text: 'Faixa',
            },
            gridLineWidth: 1,
            opposite: false,
            max: 5,
            min: 0,
            tickInterval: 1,
        }
        ],
        tooltip: {
            shared: true
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            x: 80,
            verticalAlign: 'top',
            y: 55,
            floating: true,
            backgroundColor: '#FFFFFF'
        },
        plotOptions: {
            series: {
                dataLabels: {
                    enabled: true,
                    align: 'center',
                    style: {
                        fontSize: 12,
                    },
                },
            },
            scatter:{
                marker:{
                    symbol: 'circle',
                    radius: 5,
                    inside: true,
                    fillColor: '#bd0cfb',
                    lineWidth: 2,
                    lineColor: '#710796'
                },
                symbol: 'circle',
                inside: true,
            },
        },
        series: [
        {
            name: 'CPC',
            type: 'column',
            yAxis: 0,
            color:'#ffa262',
            data: [{% for c in curso %} {{ c.cpc_f2013 }}, {% endfor %}],
        },
        {
            name: 'Posição RS',
            type: 'spline',
            yAxis: 1,
            color: '#d60707',
            data: [{% for c in curso %} {{ c.posicaorscpc }}, {% endfor %}],
            dashStyle: 'dot',
            tooltip: {
                valueSuffix: 'º'
            },
        },
        {
            name: 'Posição Sul',
            type: 'spline',
            yAxis: 2,
            color: '#2b99ff',
            data: [{% for c in curso %} {{ c.posicaosulcpc }}, {% endfor %}],
            dashStyle: 'shortdot',
            tooltip: {
                valueSuffix: 'º'
            }
        },
        {
            name: 'Posição Brasil',
            type: 'spline',
            yAxis: 3,
            color: '#3e8513',
            data: [{% for c in curso %} {{ c.posicaobrasilcpc }}, {% endfor %}],
            marker: {
                enabled: true
            },
            dashStyle: 'solid',
            tooltip: {
                valueSuffix: 'º'
            }
        },
        {
            name: 'Faixa',
            type: 'scatter',
            yAxis: 4,
            color: '#bd0cfb',
            data: [{% for c in curso %} {{ c.CPC_FAIXA }}, {% endfor %}],
            marker: {
                enabled: true
            },
            dashStyle: 'solid',
            tooltip: {
                valueSuffix: ''
            }
        },
        ]
    });
});
</script>

    <div id="container" style="min-width: 310px; width: 100%; height: 500px; margin: 0 auto"></div><br/><br/>
{% endblock %}